syntax = "proto3";

package abi_discovery;

service AbiDiscoveryService {
  rpc CheckTrackedAddresses(TrackedAddressesRequest) returns (TrackedAddressesResponse) {}

  rpc GetAddressesAbi(GetAddressesAbiRequest) returns (GetAddressesAbiResponse) {}

  rpc GetAddressesAbiJSON(GetAddressesAbiRequest) returns (GetAddressesAbiJSONResponse) {}

  rpc AddFactoryAddresses(AddFactoryAddressesRequest) returns (AddFactoryAddressesResponse) {}

  rpc GetSignaturesEvent(GetAbiEventsRequest) returns (GetAbiEventsResponse) {}
}

message TrackedAddressesRequest {
  repeated string addresses = 1;
}

message TrackedAddressesResponse {
  repeated string addresses = 1;
}

message AddressAbi {
    uint64 timestamp = 1;
    string address = 2;
    bytes abi = 3;
}

message GetAddressesAbiRequest {
  repeated string addresses = 1;
}

message GetAddressesAbiResponse {
    repeated AddressAbi addresses_abi = 1;
}

message AddFactoryAddressesRequest {
    string factory_address = 1;
    repeated string addresses = 2;
}

message AddFactoryAddressesResponse {
    bool success = 1;
}

message AddressAbiJSON {
    uint64 timestamp = 1;
    string address = 2;
    string abi = 3;
}

message GetAddressesAbiJSONResponse {
    repeated AddressAbiJSON addresses_abi = 1;
}

message GetAbiEventsResponse {
    repeated AbiEvent signatures_event = 1;
}

message GetAbiEventsRequest {
    repeated string signatures = 1;
}

message AbiEvent {
    uint64 timestamp = 1;
    string signature = 2;
    string event = 3;
    string name = 4;
}

